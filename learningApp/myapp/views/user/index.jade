extends ../layout

block content
  h1= title
  p Welcome Mr. #{name}
  p Shout Box

  div(class="parent-cont")
    div(class="left")
      span hello
      span(class="time") 23:25

    div(class="right")
      span hi
      span(class="time") 23:26 
          
  div(class="input-box")
    textarea(id="chat-box")
    input(type="submit", value="send")
 
  script(src="https://code.jquery.com/jquery-2.2.4.min.js")
  script(src="/javascripts/socket.io/socket.io.js")
  script.
    console.log('socket test');
    var socket = io();
    //sending message to server
    $('input[type=submit]').on('click', function(){
      socket.emit('chat message', $('textarea').val());
      $('textarea').val('');
      return false;
    });
    //receiving message
    
    socket.on('chat message', function(data){
      var temp = '<div class="#CL"><span>#VL</span><span class="time">#TM</span></div>';
      $('.parent-cont').append(temp.replace('#VL', data.msg).replace('#CL', data.posi).replace('#TM', data.time));
    });
